package chatServer;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.util.Scanner;

public class ChatClient {
	private static final String SERVER_ADDRESS = "192.168.30.215"; // 서버 주소
	private static final int SERVER_PORT = 7798; // 서버 포트 번호

	public static void main(String[] args) {
		try (Socket socket = new Socket(SERVER_ADDRESS, SERVER_PORT);
				OutputStream output = socket.getOutputStream();
				InputStream input = socket.getInputStream();
				Scanner sc = new Scanner(System.in)) {

			System.out.println("채팅 클라이언트 시작. 메시지를 입력하세요:");

			// 클라이언트의 메시지를 입력받고 서버로 전송
			new Thread(() -> {
				String serverMessage;
				int bytesRead;
				byte[] buffer = new byte[1024]; // 버퍼
				try {
					bytesRead = input.read(buffer);
					while ((bytesRead != -1)) {
						serverMessage = new String(buffer, 0, bytesRead);
						System.out.println("서버: " + serverMessage);
					}
				} catch (IOException e) {
					e.printStackTrace();
				}
			}).start();

			String userMessage;
			while ((userMessage = sc.nextLine()) != null) {
				output.write(userMessage.getBytes()); // 서버로 메시지 전송
			}

		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
